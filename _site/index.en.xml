<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>chechoid.netlify.app</title>
<link>https://chechoid.netlify.app/index.en.html</link>
<atom:link href="https://chechoid.netlify.app/index.en.xml" rel="self" type="application/rss+xml"/>
<description>Un blog sobre People Analytics, R y Python</description>
<generator>quarto-1.5.57</generator>
<lastBuildDate>Wed, 05 Feb 2025 03:00:00 GMT</lastBuildDate>
<item>
  <title>Tidy Tuesday - Simpsons</title>
  <dc:creator>Checho </dc:creator>
  <link>https://chechoid.netlify.app/en/tidytuesday-simpsons/</link>
  <description><![CDATA[ 




<section id="the-simpsons-data" class="level2">
<h2 class="anchored" data-anchor-id="the-simpsons-data">The Simpsons Data</h2>
<p>Let’s load the data with the <code>tidytuesdayR</code> package (or directly with the raw files if it doesn’t work.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuesdata &lt;- tidytuesdayR::tt_load('2025-02-04')</span></span>
<span id="cb1-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ## OR</span></span>
<span id="cb1-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuesdata &lt;- tidytuesdayR::tt_load(2025, week = 5)</span></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># </span></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simpsons_characters &lt;- tuesdata$simpsons_characters</span></span>
<span id="cb1-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simpsons_episodes &lt;- tuesdata$simpsons_episodes</span></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simpsons_locations &lt;- tuesdata$simpsons_locations</span></span>
<span id="cb1-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simpsons_script_lines &lt;- tuesdata$simpsons_script_lines</span></span>
<span id="cb1-9"></span>
<span id="cb1-10">simpsons_characters <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-02-04/simpsons_characters.csv'</span>)</span>
<span id="cb1-11">simpsons_episodes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-02-04/simpsons_episodes.csv'</span>)</span>
<span id="cb1-12">simpsons_locations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-02-04/simpsons_locations.csv'</span>)</span>
<span id="cb1-13">simpsons_script_lines <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> readr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_csv</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'https://raw.githubusercontent.com/rfordatascience/tidytuesday/main/data/2025/2025-02-04/simpsons_script_lines.csv'</span>)</span></code></pre></div>
</details>
</div>
</section>
<section id="pairs-of-characters" class="level1">
<h1><strong>Pairs of characters</strong></h1>
<p>My first analysis involves finding out which combinations of characters generate the best IMDb ratings and the highest number of views.</p>
<p>For that, I’m going to use the data from <code>episodes</code> and <code>script_lines</code> and select the columns I need.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Libraries</span></span>
<span id="cb2-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(extrafont)</span>
<span id="cb2-4"></span>
<span id="cb2-5"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">loadfonts</span>()</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Subset de episodes and script_lines</span></span>
<span id="cb2-8">episodes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> simpsons_episodes <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(id, imdb_rating, </span>
<span id="cb2-10">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">year =</span> original_air_year, </span>
<span id="cb2-11">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">us_viewers =</span> us_viewers_in_millions,</span>
<span id="cb2-12">         title)</span>
<span id="cb2-13"></span>
<span id="cb2-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Keep only rows where character have a dialogue</span></span>
<span id="cb2-15">script_lines <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> simpsons_script_lines <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb2-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(speaking_line <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) </span>
<span id="cb2-17"></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Join dataframes</span></span>
<span id="cb2-19">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(script_lines, episodes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"episode_id"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>))</span>
<span id="cb2-20"></span>
<span id="cb2-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data frame exploration</span></span>
<span id="cb2-22"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">glimpse</span>(df)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 26,169
Columns: 17
$ id                 &lt;dbl&gt; 132917, 134285, 127110, 126516, 126517, 126520, 126…
$ episode_id         &lt;dbl&gt; 473, 478, 452, 450, 450, 450, 450, 450, 450, 450, 4…
$ number             &lt;dbl&gt; 128, 198, 61, 1, 2, 5, 35, 6, 7, 9, 10, 11, 12, 13,…
$ raw_text           &lt;chr&gt; "Fbi Supervisor: No.", "Willis: Oh my.", "Homer Sim…
$ timestamp_in_ms    &lt;dbl&gt; 607000, 1150000, 231000, 40000, 53000, 58000, 20400…
$ speaking_line      &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…
$ character_id       &lt;dbl&gt; 5734, 5816, 2, 2, 2, 1, 31, 1, 9, 8, 31, 33, 1, 33,…
$ location_id        &lt;dbl&gt; 6, 2117, 2, 3656, 3656, 3656, 354, 3656, 3656, 3656…
$ raw_character_text &lt;chr&gt; "Fbi Supervisor", "Willis", "Homer Simpson", "Homer…
$ raw_location_text  &lt;chr&gt; "KITCHEN", "COTTAGE", "Car", "Seaworld-type Park", …
$ spoken_words       &lt;chr&gt; "No.", "Oh my.", "Holy moly!", "Oh, I love going to…
$ normalized_text    &lt;chr&gt; "no", "oh my", "holy moly", "oh i love going to aqu…
$ word_count         &lt;dbl&gt; 1, 2, 2, 25, 7, 27, 13, 43, 4, 9, 18, 2, 2, 9, 21, …
$ imdb_rating        &lt;dbl&gt; 7.0, 7.2, 7.1, 6.8, 6.8, 6.8, 6.8, 6.8, 6.8, 6.8, 6…
$ year               &lt;dbl&gt; 2010, 2011, 2010, 2010, 2010, 2010, 2010, 2010, 201…
$ us_viewers         &lt;dbl&gt; 7.18, 6.35, 5.11, 8.65, 8.65, 8.65, 8.65, 8.65, 8.6…
$ title              &lt;chr&gt; "Donnie Fatso", "Angry Dad: The Movie", "Million Do…</code></pre>
</div>
</div>
<p>Now we are going to create a list of characters that appear per episode.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">personajes_por_episodio <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(raw_character_text <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Man"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(episode_id) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb4-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">personajes =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unique</span>(raw_character_text)))</span></code></pre></div>
</details>
</div>
<p>This step generates a data frame that contains one row per episode, and then a list with the names of all the characters who have at least one line of dialogue in each episode.</p>
<p>The next step is to process the list of characters to find the pairs within each episode.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate all combinations of couples per episode</span></span>
<span id="cb5-2">duplas_por_episodio <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> personajes_por_episodio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowwise</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Makes the analysis by row instead of columns</span></span>
<span id="cb5-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">duplas =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">combn</span>(personajes, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>,   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Creates combinations of 2 characters</span></span>
<span id="cb5-5">                             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">simplify =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">unnest</span>(duplas) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Transform the list into a column</span></span>
<span id="cb5-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dupla =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">map_chr</span>(duplas, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">~</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(.x), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">collapse =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"-"</span>))) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(episode_id, dupla)</span></code></pre></div>
</details>
</div>
<p>I’ll be honest with you. I used DeepSeek for this step, so I’ll share the explanation of the code because I found it to be a very interesting approach:</p>
<section id="code-explanation" class="level3">
<h3 class="anchored" data-anchor-id="code-explanation"><strong>Code Explanation</strong></h3>
<section id="personajes_por_episodio" class="level4">
<h4 class="anchored" data-anchor-id="personajes_por_episodio"><strong>1. <code>personajes_por_episodio</code></strong></h4>
<p>This is the dataframe that contains, for each episode (<code>episode_id</code>), a list of unique <code>character_id</code>s that appear in that episode. For example:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>episode_id</strong></th>
<th style="text-align: left;"><strong>characters</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">[1, 2, 3]</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">[2, 4]</td>
</tr>
</tbody>
</table>
<p>Here, <code>characters</code> is a list-type column, where each element is a vector of <code>character_id</code>s.</p>
</section>
<section id="rowwise" class="level4">
<h4 class="anchored" data-anchor-id="rowwise"><strong>2. <code>rowwise()</code></strong></h4>
<p>The <code>rowwise()</code> function is used to apply operations <strong>row by row</strong> in a dataframe. In this case, we want to generate character combinations <strong>for each episode</strong> (i.e., for each row).</p>
</section>
<section id="mutateduplas-listcombncharacters-2-simplify-false" class="level4">
<h4 class="anchored" data-anchor-id="mutateduplas-listcombncharacters-2-simplify-false"><strong>3. <code>mutate(duplas = list(combn(characters, 2, simplify = FALSE)))</code></strong></h4>
<ul>
<li><p><strong><code>combn()</code></strong>: This function generates all possible combinations of a set of elements. Here, we want combinations of 2 characters (<code>2</code> is the second argument).</p></li>
<li><p><strong><code>characters</code></strong>: This is the list of <code>character_id</code>s for the current episode.</p></li>
<li><p><strong><code>simplify = FALSE</code></strong>: This ensures that the result is a list of combinations instead of a matrix.</p></li>
<li><p><strong><code>list()</code></strong>: Wraps the result in a list to make it compatible with <code>mutate()</code>.</p></li>
<li><p><strong><code>mutate(duplas = ...)</code></strong>: Creates a new column called <code>duplas</code>, which contains a list of all combinations of 2 characters for that episode.</p></li>
</ul>
<p>For example, if <code>characters = [1, 2, 3]</code>, the combinations would be:</p>
<ul>
<li><p><code>[1, 2]</code></p></li>
<li><p><code>[1, 3]</code></p></li>
<li><p><code>[2, 3]</code></p></li>
</ul>
</section>
<section id="unnestduplas" class="level4">
<h4 class="anchored" data-anchor-id="unnestduplas"><strong>4. <code>unnest(duplas)</code></strong></h4>
<p>The <code>unnest()</code> function is used to “unnest” a column that contains lists. In this case, <code>duplas</code> is a column of lists, where each element is a combination of 2 characters. By using <code>unnest()</code>, each combination becomes a separate row.</p>
<p>For example, if we had:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>episode_id</strong></th>
<th style="text-align: left;"><strong>duplas</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">[[1,2],[1,3],[2,3]][[1,2],[1,3],[2,3]]</td>
</tr>
</tbody>
</table>
<p>After <code>unnest()</code>, we would have:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>episode_id</strong></th>
<th style="text-align: left;"><strong>duplas</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">[1, 2]</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
<td style="text-align: left;">[1, 3]</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">[2, 3]</td>
</tr>
</tbody>
</table>
</section>
<section id="mutatedupla-map_chrduplas-pastesort.x-collapse--" class="level4">
<h4 class="anchored" data-anchor-id="mutatedupla-map_chrduplas-pastesort.x-collapse--"><strong>5. <code>mutate(dupla = map_chr(duplas, ~ paste(sort(.x), collapse = "-")))</code></strong></h4>
<ul>
<li><p><strong><code>map_chr()</code></strong>: Applies a function to each element of a list and returns a character vector.</p></li>
<li><p><strong><code>sort(.x)</code></strong>: Sorts the <code>character_id</code>s in each pair. This ensures that the pair “1-2” is the same as “2-1”.</p></li>
<li><p><strong><code>paste(..., collapse = "-")</code></strong>: Converts the sorted pair into a text string, separating the <code>character_id</code>s with a hyphen (<code>-</code>).</p></li>
<li><p><strong><code>mutate(dupla = ...)</code></strong>: Creates a new column called <code>dupla</code>, which contains the text representation of each combination.</p></li>
</ul>
<p>For example, if <code>duplas = [1, 2]</code>, after this step we would have <code>dupla = "1-2"</code>.</p>
</section>
<section id="selectepisode_id-dupla" class="level4">
<h4 class="anchored" data-anchor-id="selectepisode_id-dupla"><strong>6. <code>select(episode_id, dupla)</code></strong></h4>
<p>Finally, we select only the columns <code>episode_id</code> and <code>dupla</code> to keep a clean dataframe that contains, for each episode, all the pairs of characters that appear together.</p>
</section>
</section>
<section id="calculate-the-average-rating-by-pairs" class="level2">
<h2 class="anchored" data-anchor-id="calculate-the-average-rating-by-pairs">Calculate the Average Rating by Pairs</h2>
<p>We’ll clean the data a bit more, keeping only the pairs that appear at least 10 times.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1">top_duplas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> duplas_por_episodio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">count</span>(dupla, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">name =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"cuenta"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(cuenta <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Reducimos el dataframe</span></span>
<span id="cb6-6">duplas_por_episodio <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> duplas_por_episodio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(dupla <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> top_duplas<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>dupla)</span></code></pre></div>
</details>
</div>
<p>Now we can join the data from <code>duplas_por_episodio</code> and in that way, calculate the average rating for echar character duo.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1">duplas_con_rating <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> duplas_por_episodio <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-2">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">inner_join</span>(episodes, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">by =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"episode_id"</span> <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(dupla) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb7-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">imdb_promedio =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(imdb_rating, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">na.rm =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>),</span>
<span id="cb7-5">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">episodios =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">n</span>())</span>
<span id="cb7-6"></span>
<span id="cb7-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Filter couples with at least 10 episode appearances</span></span>
<span id="cb7-8">duplas_con_rating <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> duplas_con_rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(episodios <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb7-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(imdb_promedio))</span></code></pre></div>
</details>
</div>
<p>And now we can make a plot of the 10 couples with the best average score of <code>imdb_ranking</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Select the best 10 duos</span></span>
<span id="cb8-2">top_10_duplas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> duplas_con_rating <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb8-4"></span>
<span id="cb8-5"></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Chart</span></span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(top_10_duplas, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(dupla, imdb_promedio), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> imdb_promedio)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4f76df"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> imdb_promedio,</span>
<span id="cb8-10">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> dupla, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> dupla), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4f76df"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rating: "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(imdb_promedio, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Episodes: "</span>, episodios)),<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_y =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.35</span>,</span>
<span id="cb8-12">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.5</span>, </span>
<span id="cb8-13">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>,</span>
<span id="cb8-14">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4f76df"</span>, </span>
<span id="cb8-15">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atma Medium"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb8-17">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Top 10 Character Pairs with the Highest Average IMDb Rating"</span>,</span>
<span id="cb8-18">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Character Pair"</span>,</span>
<span id="cb8-19">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average IMDb Rating"</span></span>
<span id="cb8-20">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-21">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-22">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffd90f"</span>),</span>
<span id="cb8-23">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb8-24">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#70d1ff"</span>),</span>
<span id="cb8-25">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atma Medium"</span>),</span>
<span id="cb8-26">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-27">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.5</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/tidytuesday-simpsons/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"en_top_duplas.png"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span></code></pre></div>
</details>
</div>
<p>What if we use donuts instead of points?</p>
<div class="cell">
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Library</span></span>
<span id="cb10-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggimage)</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add a column with the name of the picture</span></span>
<span id="cb10-5">top_10_duplas <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> top_10_duplas <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb10-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">imagen =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dona.png"</span>)</span>
<span id="cb10-7"></span>
<span id="cb10-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Chart</span></span>
<span id="cb10-9"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(top_10_duplas, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">reorder</span>(dupla, imdb_promedio), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> imdb_promedio)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_segment</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">xend =</span> imdb_promedio,</span>
<span id="cb10-11">                   <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> dupla, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">yend =</span> dupla), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4f76df"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-12">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_image</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">image =</span> imagen), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.06</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-13">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Rating: "</span>, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(imdb_promedio, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">" Episodes: "</span>, episodios)),</span>
<span id="cb10-14">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_y =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.15</span>,</span>
<span id="cb10-15">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">nudge_x =</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">2.15</span>,</span>
<span id="cb10-16">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">3.7</span>,</span>
<span id="cb10-17">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atma Medium"</span>,</span>
<span id="cb10-18">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>,</span>
<span id="cb10-19">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#4f76df"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-20">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(</span>
<span id="cb10-21">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Top 10 Character Pairs with the Highest Average IMDb Rating"</span>,</span>
<span id="cb10-22">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Character Pair"</span>,</span>
<span id="cb10-23">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average IMDb Rating"</span></span>
<span id="cb10-24">  ) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-25">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-26">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_rect</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fill =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#ffd90f"</span>),</span>
<span id="cb10-27">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.background =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_blank</span>(),</span>
<span id="cb10-28">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">panel.grid.major.x =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_line</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"#70d1ff"</span>),</span>
<span id="cb10-29">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">text =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">element_text</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">face =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bold"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">family =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Atma Medium"</span>),</span>
<span id="cb10-30">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">plot.title.position =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"plot"</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb10-31">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">8.5</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/tidytuesday-simpsons/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Ver código</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggsave</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"top_duplas_dona.png"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">dpi =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span></code></pre></div>
</details>
</div>
<p><img src="https://chechoid.netlify.app/en/tidytuesday-simpsons/apu_vuelva_prontos.png" class="img-fluid" width="248"></p>


</section>
</section>

 ]]></description>
  <category>ggplot2</category>
  <category>tidytuesday</category>
  <category>tidyverse</category>
  <category>dplyr</category>
  <category>data viz</category>
  <category>fun</category>
  <category>r</category>
  <category>simpsons</category>
  <guid>https://chechoid.netlify.app/en/tidytuesday-simpsons/</guid>
  <pubDate>Wed, 05 Feb 2025 03:00:00 GMT</pubDate>
</item>
<item>
  <title>Doing silly things in R</title>
  <dc:creator>Checho </dc:creator>
  <link>https://chechoid.netlify.app/en/doing-silly-things-r/</link>
  <description><![CDATA[ 




<section id="why-did-i-choose-this-as-my-first-post" class="level1">
<h1>Why Did I Choose This as My First Post?</h1>
<p>I once watched Ryan Timpe, the Lead Data Scientist at Lego, where he shared how he sometimes took on fun projects to learn new data analysis skills. In <a href="https://www.rstudio.com/resources/rstudioconf-2020/learning-r-with-humorous-side-projects/">his talk at the RStudio Conference</a>, he mentioned analyzing the dialogues from <strong>The Golden Girls</strong> using text mining techniques to find the most frequent words. Every time one of the characters said the magic words, they’d take a “white shot” of whatever they were drinking.</p>
<p>This post is about something similar. I wanted to learn how to use images in my visualizations, and that’s how this project was born—using images of people with “similar” features to mine and incorporating those photos into a scatter plot.</p>
<p>What might seem like a silly project involved:</p>
<ul>
<li><p>Creating a Google Form.</p></li>
<li><p>Collecting data from responses.</p></li>
<li><p>Processing the results.</p></li>
<li><p>Including visualizations with people’s images.</p></li>
</ul>
<p>Projects like this make learning feel less heavy and give you extra motivation to find solutions and get results.</p>
</section>
<section id="a-bit-of-context" class="level1">
<h1>A Bit of Context</h1>
<p>This is me:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/doing-silly-things-r/archivos/sergio.jpg" class="img-fluid figure-img" alt="Foto de Sergio, sosteniendo una copa de vino" width="372"></p>
<figcaption><em>Photo of me on my honeymoon in Mendoza</em></figcaption>
</figure>
</div>
<p>As you can see, I have medium-length hair, bangs, and a goatee. A lot of people say I look like Nicolás del Caño 🤷 —a member of the Socialist Workers Party in Argentina—because he has a similar haircut and also rocks a beard.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.izquierdadiario.es/IMG/auton3.jpg?1605455691" class="img-fluid figure-img" width="221"></p>
<figcaption>Nicolás del Caño</figcaption>
</figure>
</div>
<p>We don’t look that similar in these photos, but let me share a story. When my daughter was around three years old, there was a campaign for parliamentary elections, and posters of all the political parties were everywhere—including, of course, the PTS with Nicolás del Caño. One day, my wife and daughter were walking down the street, and as they approached one of Del Caño’s posters, my daughter pointed at it and said, “Daddy!” as if it were me on the poster. So, there’s some resemblance, I guess.</p>
<p>She also once pointed at a Johnny Depp poster for Sauvage perfume and said the same thing, but no one believes that one.</p>
<p>Other characters my friends joke I resemble include Gigoló, Roberto Baradel, and Mono Burgos.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://www.elesquiu.com/u/fotografias/m/2023/10/22/f1280x720-487186_618861_5050.jpeg" class="img-fluid figure-img" width="340"></p>
<figcaption>El Gigoló</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn.cnn.com/cnnnext/dam/assets/190306231108-pba-baradel-large-169.jpg" class="img-fluid figure-img" width="339"></p>
<figcaption>Roberto Baradel</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://phantom-elmundo.unidadeditorial.es/6744bff920f7004ccfe5c7f23aefac88/crop/0x29/1972x1340/resize/1200/f/webp/assets/multimedia/imagenes/2020/06/03/15912134233683.jpg" class="img-fluid figure-img"></p>
<figcaption>El Mono Burgos</figcaption>
</figure>
</div>
<p>I know what you’re thinking: <em>“With friends like these, who needs enemies?”</em> But they’re lovable anyway.</p>
</section>
<section id="the-idea-k-nn" class="level1">
<h1>The Idea: k-nn</h1>
<p>This analysis idea came up one day while explaining a clustering method called <strong>k-nn</strong>. Clustering methods are data science techniques used to find groups (or “clusters”) within data.</p>
<p>The k-nn method (<em>“k-nearest neighbors”</em>) assigns each individual to a cluster based on the features of their “neighbors.” In other words, it determines which group each case belongs to based on what it most closely resembles.</p>
<p>To explain this visually, I drew this on Paint:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/doing-silly-things-r/images/clipboard-3058012685.jpeg" class="img-fluid figure-img"></p>
<figcaption>Paint drawing showing clusters</figcaption>
</figure>
</div>
<p>The idea is that, within this dataset, I’m closer to the cluster of Mono Burgos and Nicolás del Caño than to the cluster of Keanu Reeves, Jeff Bridges, and Brad Pitt.</p>
<p>Then I had a thought: <strong>what if I did this with actual data?</strong></p>
<p><img src="https://media1.giphy.com/media/3oz8xP6SaSkSU9dhcI/200w.gif?cid=82a1493b6dys6v5sl1wm0y65sc1ej72nglv6y40cwx6rrtw2&amp;rid=200w.gif&amp;ct=g" class="img-fluid"></p>
</section>
<section id="doing-weird-stuff-for-normal-people-in-r" class="level1">
<h1>Doing Weird Stuff for Normal People in R</h1>
<p>The idea was to replicate the graphic above but with real data. So, I started by searching for photos of Argentine and international figures with medium-to-long hair, beards, and, in some cases, a few extra pounds.</p>
<p>To standardize the images, I used Canva to resize them to similar dimensions. Then, I created a Google Form with each image and asked my friends to rate the “facha” (Argentine slang for physical attractiveness) and “copadez” (how cool or likable someone is) on a scale from 1 to 10.</p>
<p>The characters involved were:</p>
<ul>
<li><p>Nicolás del Caño</p></li>
<li><p>Roberto Baradel</p></li>
<li><p>Mono Burgos</p></li>
<li><p>Ricardo Caruso Lombardi</p></li>
<li><p>Ben Affleck</p></li>
<li><p>Jeff Bridges</p></li>
<li><p>Brad Pitt</p></li>
<li><p>Javier Bardem</p></li>
<li><p>Keanu Reeves</p></li>
<li><p>And yours truly 😉</p></li>
</ul>
<p>In my original analysis, I pulled the data directly from the Google Sheets linked to the form. For reproducibility purposes, I’ll use a CSV file here so you can replicate the results.</p>
<section id="loading-and-preparing-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-and-preparing-data">Loading and Preparing Data</h2>
<p>Let’s start by loading the libraries and importing data from a repository.</p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Libraries</span></span>
<span id="cb1-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse) <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Load, cleand and wrangle data</span></span>
<span id="cb1-3"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggimage)   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># To use images withing chart</span></span>
<span id="cb1-4"></span>
<span id="cb1-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Data</span></span>
<span id="cb1-6">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">read_delim</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"https://raw.githubusercontent.com/chechoid/silliest-use-of-r/main/source.csv"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">delim =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">";"</span>)</span>
<span id="cb1-7"></span>
<span id="cb1-8"></span>
<span id="cb1-9">comentarios <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">comentarios =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Poné lo que quieras... parecidos, chistes, comentarios, etc...</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb1-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">is.na</span>(comentarios))</span>
<span id="cb1-12"></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Explore the data</span></span>
<span id="cb1-14"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(clones)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 24
  `Marca temporal`    `Facha de Keanu` `Copadez de Keanu` `Facha de Russell`
  &lt;dttm&gt;                         &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
1 2021-06-23 12:37:28               10                 10                  7
2 2021-06-23 12:39:12                4                 10                  5
3 2021-06-23 12:42:21                8                  9                  8
4 2021-06-23 12:43:24               10                 10                  1
5 2021-06-23 12:45:03               10                  8                  4
6 2021-06-23 12:45:12                5                  9                  1
# ℹ 20 more variables: `Copadez de Russell` &lt;dbl&gt;, `Facha de Nico` &lt;dbl&gt;,
#   `Copadez de Nico` &lt;dbl&gt;, `Facha de Roberto` &lt;dbl&gt;,
#   `Copadez de Roberto` &lt;dbl&gt;, `Facha de Jeff` &lt;dbl&gt;, `Copadez de Jeff` &lt;dbl&gt;,
#   `Facha de Brad` &lt;dbl&gt;, `Copadez de Brad` &lt;dbl&gt;, `Facha del Mono` &lt;dbl&gt;,
#   `Copadez del Mono` &lt;dbl&gt;, `Facha de Sergio` &lt;dbl&gt;,
#   `Copadez de Sergio` &lt;dbl&gt;, `Facha de Ricky` &lt;dbl&gt;,
#   `Copadez de Ricky` &lt;dbl&gt;, `Facha de Ben` &lt;dbl&gt;, `Copadez de Ben` &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>The dataset included columns for each character’s “facha” (gorgeousness) and “copadez” (awesomeness) scores. The next steps were:</p>
<ol type="1">
<li><p>Removing irrelevant columns and adding an ID column.</p></li>
<li><p>Pivoting the table so that all the score columns ended up in two columns (one for “facha” and one for “copadez”).</p></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Remove unnecesary columns</span></span>
<span id="cb3-2">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Marca temporal</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>, <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span><span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">Poné lo que quieras... parecidos, chistes, comentarios, etc...</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">`</span>)</span>
<span id="cb3-4"></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Add id column</span></span>
<span id="cb3-6">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowid_to_column</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">var =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"id"</span>)</span>
<span id="cb3-8"></span>
<span id="cb3-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pivot to a lonf format</span></span>
<span id="cb3-10">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb3-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_longer</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Facha de Keanu"</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Copadez de Javier"</span>),</span>
<span id="cb3-12">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"personaje"</span>,</span>
<span id="cb3-13">               <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_to =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"puntaje"</span>)</span>
<span id="cb3-14"></span>
<span id="cb3-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Explore the dataset again</span></span>
<span id="cb3-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(clones)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
     id personaje          puntaje
  &lt;int&gt; &lt;chr&gt;                &lt;dbl&gt;
1     1 Facha de Keanu          10
2     1 Copadez de Keanu        10
3     1 Facha de Russell         7
4     1 Copadez de Russell      10
5     1 Facha de Nico            1
6     1 Copadez de Nico          1</code></pre>
</div>
</div>
<p>We started with 66 rows and 24 columns and ended up with a data frame of 1,452 rows and 3 columns. After removing intermediary words like <code>"de"</code> and <code>"del"</code> from names, we created separate columns for <code>“facha”</code> and <code>“copadez.”</code></p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Split nominal variables</span></span>
<span id="cb5-2">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">personaje =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(personaje, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"de "</span>),</span>
<span id="cb5-4">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">personaje =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_remove</span>(personaje, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"del "</span>))</span>
<span id="cb5-5"></span>
<span id="cb5-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Explore average score of each character</span></span>
<span id="cb5-7">clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(personaje) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">valor_promedio =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(puntaje)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb5-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> valor_promedio, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> personaje)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb5-11">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/doing-silly-things-r/index_files/figure-html/preproceso2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Split the column 'personaje' (character) into two columns, one for the metric, the other for the name</span></span>
<span id="cb6-2">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">separate</span>(personaje,  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">into =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"metrica"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"persona"</span>))</span>
<span id="cb6-4"></span>
<span id="cb6-5"></span>
<span id="cb6-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pivot to wide format </span></span>
<span id="cb6-7">clones <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb6-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pivot_wider</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id_cols =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(id, persona),</span>
<span id="cb6-9">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">names_from =</span> metrica,</span>
<span id="cb6-10">              <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">values_from =</span> puntaje)</span>
<span id="cb6-11"></span>
<span id="cb6-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Explore the new data frame</span></span>
<span id="cb6-13"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(clones)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
     id persona Facha Copadez
  &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1     1 Keanu      10      10
2     1 Russell     7      10
3     1 Nico        1       1
4     1 Roberto     1       1
5     1 Jeff        5       5
6     1 Brad       10      10</code></pre>
</div>
</div>
<p>Finally, we had a dataset with 726 rows—one for each vote per character—and four columns: <code>ID</code>, <code>character</code> (personaje), <code>“facha,”</code> and <code>“copadez.”</code></p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Calculate the average scores for each character and plot results</span></span>
<span id="cb8-2">resultados <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> clones <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">group_by</span>(persona) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb8-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">summarise</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">facha_promedio =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(Facha),</span>
<span id="cb8-5">            <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">copadez_promedio =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mean</span>(Copadez))</span>
<span id="cb8-6"></span>
<span id="cb8-7"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(resultados, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> copadez_promedio, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> facha_promedio, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> persona)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb8-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average Awesomeness and Gorgeousness"</span>,</span>
<span id="cb8-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avg Awesomeness"</span>,</span>
<span id="cb8-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avg Gourgeness"</span>,</span>
<span id="cb8-12">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Person"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/doing-silly-things-r/index_files/figure-html/resultados_promedios-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This gave us the foundation for our results. To make the chart less boring, let’s spice it up with images.</p>
</section>
<section id="adding-images-to-the-chart" class="level2">
<h2 class="anchored" data-anchor-id="adding-images-to-the-chart">Adding Images to the Chart</h2>
<p>As mentioned earlier, I used Canva to resize all the images and saved them in a folder called “clones.” Instead of uploading each photo individually, I created a data frame linking the names of the characters to their corresponding image files.</p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a vector with the name of the people</span></span>
<span id="cb9-2">persona <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> resultados <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">select</span>(persona) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span> </span>
<span id="cb9-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">pull</span>()</span>
<span id="cb9-5"></span>
<span id="cb9-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create a vector of images</span></span>
<span id="cb9-7">ruta <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"pics"</span>       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Picture path</span></span>
<span id="cb9-8">extension <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"png"</span>   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extension of the image files</span></span>
<span id="cb9-9"></span>
<span id="cb9-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Name of the files</span></span>
<span id="cb9-11">imagen <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ben"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Brad"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Javier"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jeff"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"keanu"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mono"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"nico"</span>, </span>
<span id="cb9-12">            <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"ricky"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"roberto"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"russell"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sergio"</span>)</span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the vector of photos with the path and file extension</span></span>
<span id="cb9-15">foto <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(ruta, imagen, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"/"</span>)</span>
<span id="cb9-16">foto <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">str_c</span>(foto, extension, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">sep =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"."</span>)</span>
<span id="cb9-17"></span>
<span id="cb9-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the data frame and add the scores to it</span></span>
<span id="cb9-19">pics <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(persona, foto)</span>
<span id="cb9-20"></span>
<span id="cb9-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># See the results of this process</span></span>
<span id="cb9-22">pics</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>   persona             foto
1      Ben     pics/Ben.png
2     Brad    pics/Brad.png
3   Javier  pics/Javier.png
4     Jeff    pics/jeff.png
5    Keanu   pics/keanu.png
6     Mono    pics/mono.png
7     Nico    pics/nico.png
8    Ricky   pics/ricky.png
9  Roberto pics/roberto.png
10 Russell pics/russell.png
11  Sergio  pics/sergio.png</code></pre>
</div>
</div>
<p>We now had a data frame with 11 rows and 2 columns (name and image path), which we integrated into the dataset with average “facha” (gorgeousness) and “copadez” (awesomeness) scores.</p>
<p>Finally, it was time to add the images to the chart:</p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Join datasets</span></span>
<span id="cb11-2">resultados <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">left_join</span>(resultados, pics)</span>
<span id="cb11-3"></span>
<span id="cb11-4"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">head</span>(resultados)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  persona facha_promedio copadez_promedio foto           
  &lt;chr&gt;            &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;          
1 Ben               8.23             6.47 pics/Ben.png   
2 Brad              8.52             7.55 pics/Brad.png  
3 Javier            6.89             6.56 pics/Javier.png
4 Jeff              5.06             6.45 pics/jeff.png  
5 Keanu             7.77             8.74 pics/keanu.png 
6 Mono              3.30             6.30 pics/mono.png  </code></pre>
</div>
</div>
<p>Finally, it was time to add the images to the chart:</p>
<div class="cell">
<details class="code-fold">
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Final Result</span></span>
<span id="cb13-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(resultados, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> copadez_promedio, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> facha_promedio)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-3">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_image</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">image=</span>foto), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size =</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.08</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_minimal</span>() <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-5">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_x_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">scale_y_continuous</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">limits =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb13-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">labs</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">title =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Average Awesomeness and Gorgeousness"</span>,</span>
<span id="cb13-8">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">subtitle =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n = 66"</span>,</span>
<span id="cb13-9">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">x =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avg Awesomeness"</span>,</span>
<span id="cb13-10">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">y =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Avg Gourgeness"</span>,</span>
<span id="cb13-11">       <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">caption =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"No aunt was part of this analysis"</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://chechoid.netlify.app/en/doing-silly-things-r/index_files/figure-html/grafico_final-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p><strong>According to the data</strong>, I’m farther from Nicolás del Caño and Roberto Baradel and closer to Keanu Reeves. So, <strong>the data says I look like Keanu</strong>. Facts, not opinions 😎.</p>
</section>
</section>
<section id="what-did-i-learn" class="level1">
<h1>What Did I Learn?</h1>
<ol type="1">
<li><p>I learned to use a new package, <code>ggimage</code><em>,</em> which allows you to add images to charts.</p></li>
<li><p>A mistake in the form design (labeling one field as “Facha del Mono” in Spanish) required extra data cleaning—a valuable lesson that helped me prevent potential issues in a subsequent diversity survey project for a client.</p></li>
<li><p>Handling data transformations—pivoting from “wide” to “long” formats and back—was key. Once I managed that, calculating results became straightforward.</p></li>
</ol>
<p>This project took two days of work, tutorials, documentation, and a lot of trial and error. While it was a lot of effort, the silliness of the project removed much of the pressure, making it easier to interpret error messages and find the right solutions.</p>
<p>Projects like this are perfect right after finishing a tutorial or course. The datasets in tutorials are often clean and controlled, but working with your own data introduces real-world challenges. Doing a fun project like this without the pressure of “adding business value” is a great way to test your skills.</p>
<p>So, I invite you to take on a ridiculous project and share it with the world.</p>
<section id="closing-words" class="level3">
<h3 class="anchored" data-anchor-id="closing-words">Closing Words</h3>
<p>If you’d like to see the script, you can find it in the repository following <a href="https://github.com/chechoid/chechoid-blog/blob/main/posts/haciendo-boludeces-en-r/index.qmd">this link</a>.</p>
<p>Thanks for reading!</p>
<p><img src="https://media.giphy.com/media/QAsBwSjx9zVKoGp9nr/giphy.gif" class="img-fluid"></p>


</section>
</section>

 ]]></description>
  <category>fun</category>
  <category>ggplot2</category>
  <category>proyectos</category>
  <guid>https://chechoid.netlify.app/en/doing-silly-things-r/</guid>
  <pubDate>Thu, 01 Sep 2022 03:00:00 GMT</pubDate>
</item>
</channel>
</rss>
